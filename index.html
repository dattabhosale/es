<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LeapReplica - Electric Vehicles</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand">LeapReplica</a>
      <nav class="site-nav" id="site-nav">
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">☰</button>
    </div>
  </header>
  <main>
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h1>Electric mobility, designed for the future.</h1>
          <p>Explore a new generation of electric vehicles with long range, smart features, and bold design.</p>
          <p><a class="btn" href="products.html">View Models</a></p>
        </div>
        <div class="hero-media">
          <img src="assets/car-hero.jpg" alt="Electric car mockup">
        </div>
      </div>
    </section>
    <section class="highlights">
      <div class="container">
        <h2>Featured Models</h2>
        <div class="cards">
          <article class="card">
            <img src="assets/model-a.jpg" alt="Model A">
            <h3>Model A</h3>
            <p>Long range, fast charging, advanced driver assistance.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>
          <article class="card">
            <img src="assets/model-b.jpg" alt="Model B">
            <h3>Model B</h3>
            <p>Urban performance with compact design and premium interior.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>
          <article class="card">
            <img src="assets/model-c.jpg" alt="Model C">
            <h3>Model C</h3>
            <p>An intelligent SUV with family-friendly range and space.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>
        </div>
      </div>
    </section>
    <section class="about-teaser">
      <div class="container">
        <h2>Our Vision</h2>
        <p>We build electric vehicles that are safe, sustainable and delightful to drive. Technology and design come
          together to make mobility more efficient and enjoyable.</p>
        <p><a class="btn ghost" href="about.html">Learn about us</a></p>
      </div>
    </section>
  </main>
  <footer class="site-footer">
    <div class="container">
      <div>© 2025 LeapReplica</div>
      <nav class="foot-nav">
        <a href="privacy.html">Privacy</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>
  <!-- Salesforce Embedded Messaging Script -->
<script type="text/javascript">
function initEmbeddedMessaging() {
  try {
    embeddedservice_bootstrap.settings.language = "es";

    window.addEventListener("onEmbeddedMessagingReady", () => {
      embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
        Country: "Spain",
        Language: "es",
        CountryCode: "es",
      });
    });

    embeddedservice_bootstrap.settings.chatButtonPosition = "60px, 30px";

    embeddedservice_bootstrap.init(
      "00DMA000003XnGM",
      "LPM_Leapmotor",
      "https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231",
      { scrt2URL: "https://leapmotor--dev01.sandbox.my.salesforce-scrt.com" }
    );
  } catch (err) {
    console.error("Error loading Embedded Messaging:", err);
  }
}

(function () {
  const DESKTOP_MIN_WIDTH = 1025;
  const CHAT_OFFSET = 40;

  /* =========================
     UTILS
     ========================= */
  function getChatFrame() {
    return (
      document.querySelector(".embeddedMessagingFrame") ||
      document.querySelector('iframe[src*="embeddedmessaging"]')
    );
  }

  function applyDesktopOffset() {
    if (window.innerWidth < DESKTOP_MIN_WIDTH) return;

    const frame = getChatFrame();
    if (!frame) return;

    frame.style.position = "relative";
    frame.style.bottom = CHAT_OFFSET + "px";

    console.log("[CHAT] Offset desktop applicato:", CHAT_OFFSET);
  }

  function resetMobile() {
    const frame = getChatFrame();
    if (!frame) return;

    frame.style.bottom = "0px";
    frame.style.position = "relative";
  }

  /* =========================
     EVENTI SALESFORCE
     ========================= */
  window.addEventListener("onEmbeddedMessagingWindowOpened", () => {
    console.log("[ESW] window opened");

    if (window.innerWidth >= DESKTOP_MIN_WIDTH) {
      // doppia applicazione per sicurezza (prima apertura)
      setTimeout(applyDesktopOffset, 0);
      setTimeout(applyDesktopOffset, 300);
    } else {
      resetMobile();
    }
  });

  window.addEventListener("onEmbeddedMessagingWindowMinimized", () => {
    console.log("[ESW] window minimized");

    if (window.innerWidth >= DESKTOP_MIN_WIDTH) {
      setTimeout(applyDesktopOffset, 0);
    }
  });

  window.addEventListener("resize", () => {
    if (window.innerWidth >= DESKTOP_MIN_WIDTH) {
      applyDesktopOffset();
    } else {
      resetMobile();
    }
  });

})();
</script>
<script type="text/javascript">
function initEmbeddedMessaging() {
  try {
    embeddedservice_bootstrap.settings.language = "es";

    window.addEventListener("onEmbeddedMessagingReady", () => {
      embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
        Country: "Spain",
        Language: "es",
        CountryCode: "es",
      });
    });

    embeddedservice_bootstrap.settings.chatButtonPosition = "60px, 30px";

    embeddedservice_bootstrap.init(
      "00DMA000003XnGM",
      "LPM_Leapmotor",
      "https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231",
      { scrt2URL: "https://leapmotor--dev01.sandbox.my.salesforce-scrt.com" }
    );
  } catch (err) {
    console.error("Error loading Embedded Messaging:", err);
  }
}

(function () {
  const DESKTOP_MIN_WIDTH = 1025;
  const CHAT_OFFSET = 40;

  /* =========================
     UTILS
     ========================= */
  function getChatFrame() {
    return (
      document.querySelector(".embeddedMessagingFrame") ||
      document.querySelector('iframe[src*="embeddedmessaging"]')
    );
  }

  function applyDesktopOffset() {
    if (window.innerWidth < DESKTOP_MIN_WIDTH) return;

    const frame = getChatFrame();
    if (!frame) return;

    frame.style.position = "relative";
    frame.style.bottom = CHAT_OFFSET + "px";

    console.log("[CHAT] Offset desktop applicato:", CHAT_OFFSET);
  }

  function resetMobile() {
    const frame = getChatFrame();
    if (!frame) return;

    frame.style.bottom = "0px";
    frame.style.position = "relative";
  }

  /* =========================
     EVENTI SALESFORCE
     ========================= */
  window.addEventListener("onEmbeddedMessagingWindowOpened", () => {
    console.log("[ESW] window opened");

    if (window.innerWidth >= DESKTOP_MIN_WIDTH) {
      // doppia applicazione per sicurezza (prima apertura)
      setTimeout(applyDesktopOffset, 0);
      setTimeout(applyDesktopOffset, 300);
    } else {
      resetMobile();
    }
  });

  window.addEventListener("onEmbeddedMessagingWindowMinimized", () => {
    console.log("[ESW] window minimized");

    if (window.innerWidth >= DESKTOP_MIN_WIDTH) {
      setTimeout(applyDesktopOffset, 0);
    }
  });

  window.addEventListener("resize", () => {
    if (window.innerWidth >= DESKTOP_MIN_WIDTH) {
      applyDesktopOffset();
    } else {
      resetMobile();
    }
  });

})();
</script>

<style>
/* =========================================================
   VARIABILI
   ========================================================= */
:root {
  --launcher-bottom: 60px;
  --launcher-right: 30px;
  --chat-offset-desktop: 40px;
}
 
/* =========================================================
   LAUNCHER (DESKTOP + MOBILE)
   ========================================================= */
.embeddedServiceLauncher,
.embeddedServiceSidebarButton,
button[class*="Launcher"],
div[class*="Launcher"] {
  position: fixed !important;
  bottom: var(--launcher-bottom) !important;
  right: var(--launcher-right) !important;
  left: auto !important;
  top: auto !important;
  transform: none !important;
  z-index: 2147483647 !important;
}
 
/* =========================================================
   DESKTOP (>=1025px)
   ========================================================= */
@media (min-width: 1025px) {
 
  /* contenitore Salesforce */
  #embedded-messaging {
    right: 30px !important;
    bottom: 0 !important; /* lasciato a 0 */
  }
 
  /* iframe chat (OFFSET REALE) */
  .embeddedMessagingFrame {
    border-radius: 16px !important;
    overflow: hidden !important;
    bottom: var(--chat-offset-desktop) !important;
  }
 
  .embeddedMessagingHeader {
    border-top-left-radius: 16px !important;
    border-top-right-radius: 16px !important;
  }
 
  .embeddedMessagingConversation {
    border-bottom-left-radius: 16px !important;
    border-bottom-right-radius: 16px !important;
  }
}
 
/* =========================================================
   MOBILE / TABLET (FULL SCREEN)
   ========================================================= */
@media (max-width: 1024px) {
 
  #embedded-messaging {
    position: fixed !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100dvh !important;
    border-radius: 0 !important;
    z-index: 2147483646 !important;
  }
 
  .embeddedMessagingFrame {
    bottom: 0 !important;
    border-radius: 0 !important;
  }
 
  /* launcher mobile */
  .embeddedServiceLauncher,
  .embeddedServiceSidebarButton,
  button[class*="Launcher"],
  div[class*="Launcher"] {
    bottom: 20px !important;
    right: 20px !important;
  }
}
</style>
  <!-- Load Salesforce Embedded Messaging Bootstrap -->
  <script
    type="text/javascript"
    src="https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231/assets/js/bootstrap.min.js"
    onload="initEmbeddedMessaging()"
  ></script>
</body>
</html>
